$(function(){$(".action button.action-remove").click(function(){var e=$(this),r=e.closest(".input-group"),p=r.parent();if(r.data("repeated")){var rs=p.find(".input-group");rs.length>1?(r.remove(),2===rs.length&&r.data("required")&&r.find(".action-remove").addClass("hide")):(r.find(".action-remove").addClass("hide"),r.data("required")||r.find(".action-input").addClass("hide"))}else e.addClass("hide"),r.find(".action-add").removeClass("hide"),r.find(".action-input").addClass("hide")}),$(".action button.action-add").click(function(){var e=$(this),r=e.parent().closest(".input-group"),v=r.find(".action-input");if(r.find(".action-remove").removeClass("hide"),r.data("repeated"))if(v.hasClass("hide"))v.removeClass("hide");else{var c=r.clone(!0);r.parent().append(c)}else v.removeClass("hide"),e.addClass("hide")}),$(".call-result button.close").click(function(){$(this).parent().hide()}),$("form.call").submit(function(){event.preventDefault();var e=$(this),h=e.parent(),result=$("#"+e.data("result")),response=result.find(".response"),toggle=function(error){response.removeClass(function(){return error?"alert-success":"alert-danger"}).addClass(function(){return error?"alert-danger":"alert-success"})};h.waitMe({effect:"facebook"}),$.ajax({type:e.attr("method"),url:e.attr("action"),data:e.serialize(),complete:function(){result.show(),h.waitMe("hide")},error:function(){response.html("Ajax request failed"),toggle(!0)},success:function(r){var p="";if(r.headers){var headers=[];for(var key in r.headers)for(var val in r.headers[key])headers[headers.length]=key.toUpperCase()+": "+val;p=headers.join("\n")+"\n\n"}r.result?p+=JSON.stringify(JSON.parse(r.result),null,4):r.error&&(p+=r.error),response.html(p),toggle(r.error)}})})});