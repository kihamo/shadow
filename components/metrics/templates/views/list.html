{{ define "content" }}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">List metrics</h1>
    </div>
</div>

{{ if .error }}
<div class="alert alert-danger alert-dismissable">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    {{ .error.Error }}
</div>
{{ end }}

<div class="panel panel-info">
    <div class="panel-heading">
        Shows {{ len .metrics }} metrics{{ if .updated }} last updated at {{ .updated.Format "2006.01.02 15:04:05" }}{{ end }}
    </div>
    <div class="panel-body">
        <div class="table-responsive">
            <table class="table table-hover table-striped">
                <thead>
                <tr>
                    <th>Name</th>
                    <th class="md-col-1">Type</th>
                    <th>Labels</th>
                    <th>Value</th>
                </tr>
                </thead>
                <tbody>
                {{ range $m, $metric := .metrics }}
                <tr>
                    <td>{{ $metric.Name }}</td>
                    <td>{{ $metric.Type }}</td>
                    <td>
                        {{ range $l, $label := $metric.Labels }}
                            <span class="label label-success">{{ $label.Key }}: {{ $label.Value }}</span>
                        {{ end }}
                    </td>
                    <td>
                        {{ $type := $metric.Type.String }}
                        {{ if eq $type "counter" }}
                            <span class="label label-info">value: {{ $metric.Counter.Value }}</span>
                        {{ else if eq $type "gauge" }}
                            <span class="label label-info">value: {{ $metric.Gauge.Value }}</span>
                        {{ else if eq $type "histogram" }}
                            <span class="label label-info">count: {{ $metric.Histogram.SampleCount }}</span>
                            <span class="label label-info">min: {{ $metric.Histogram.SampleMin }}</span>
                            <span class="label label-info">max: {{ $metric.Histogram.SampleMax }}</span>
                            <span class="label label-info">variance: {{ $metric.Histogram.SampleVariance }}</span>

                            {{ range $q, $value := $metric.Histogram.Quantiles }}
                                <span class="label label-info">{{ $q }}: {{ $value }}</span>
                            {{ end }}
                        {{ else if eq $type "timer" }}
                            <span class="label label-info">count: {{ $metric.Timer.SampleCount }}</span>
                            <span class="label label-info">min: {{ $metric.Timer.SampleMin }}</span>
                            <span class="label label-info">max: {{ $metric.Timer.SampleMax }}</span>
                            <span class="label label-info">variance: {{ $metric.Timer.SampleVariance }}</span>

                            {{ range $q, $value := $metric.Timer.Quantiles }}
                                <span class="label label-info">{{ $q }}: {{ $value }}</span>
                            {{ end }}
                        {{ end }}
                    </td>
                </tr>
                {{ end }}
                </tbody>
            </table>
        </div>
    </div>
</div>
{{ end }}