function init_sidebar(){var setContentHeight=function(){$RIGHT_COL.css("min-height",$(window).height()-$FOOTER.outerHeight())};$SIDEBAR_MENU.find("a").on("click",function(ev){console.log("clicked - sidebar_menu");var $li=$(this).parent();$li.is(".active")?($li.removeClass("active active-sm"),$("ul:first",$li).slideUp(function(){setContentHeight()})):($li.parent().is(".child_menu")?$BODY.is(".nav-sm")&&($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()):($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),$li.addClass("active"),$("ul:first",$li).slideDown(function(){setContentHeight()}))}),$MENU_TOGGLE.on("click",function(){console.log("clicked - menu toggle"),$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")),$BODY.toggleClass("nav-md nav-sm"),setContentHeight(),$(".dataTable").each(function(){$(this).dataTable().fnDraw()})}),$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){setContentHeight()}).parent().addClass("active"),$(window).smartresize(function(){setContentHeight()}),setContentHeight(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}function countChecked(){"all"===checkState&&$(".bulk_action input[name='table_records']").iCheck("check"),"none"===checkState&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var checkCount=$(".bulk_action input[name='table_records']:checked").length;checkCount?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(checkCount+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}function init_tabs(){var showTab=getParameterByName("tab");showTab&&$(".nav-tabs a[href=#"+showTab+"]").tab("show")}function init_autosize(){"undefined"!=typeof autosize&&autosize($(".resizable_textarea"))}function init_validator(){"undefined"!=typeof validator&&(validator.message.date="not a real date",$("form").on("blur","input[required], input.optional, select.required",validator.checkField).on("change","select.required",validator.checkField).on("keypress","input[required][pattern]",validator.keypress),$(".multi.required").on("keyup blur","input",function(){validator.checkField.apply($(this).siblings().last()[0])}),$("form").submit(function(e){e.preventDefault();var submit=!0;return validator.checkAll($(this))||(submit=!1),submit&&this.submit(),!1}))}function init_modals(){$("#modal").on("show.bs.modal",function(event){var target=$(event.relatedTarget),modal=$(this),title=target.data("modal-title");"undefined"!==title&&modal.find(".modal-title").text(title);var body=target.data("modal-body");"undefined"!==body&&modal.find(".modal-body").text(body);var callback=target.data("modal-callback");"undefined"!==callback&&$("#modal").data("modal-callback",callback)}),$("#modal button[type=submit]").click(function(e){e.preventDefault();var callback=$("#modal").data("modal-callback");"undefined"!==callback&&eval(callback)})}function init_password_show(){void 0!==$.fn.password&&$("input[type=password].password-show").password()}function init_switchery(){"undefined"!=typeof Switchery&&$(".js-switch")[0]&&Array.prototype.slice.call(document.querySelectorAll(".js-switch")).forEach(function(html){new Switchery(html,{color:"#26B99A"})})}function init_icheck(){void 0!==$.fn.iCheck&&$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}function init_progressbar(){void 0!==$.fn.progressbar&&$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar()}function init_datatables(){void 0!==$.fn.DataTable&&$(".datatable").dataTable({paging:!1,fixedHeader:!0})}function init_alerts(){function alertUpdate(){$.ajax({type:"GET",url:"/alerts/ajax/",success:function(r){if(!r.length)return e.find(".badge").hide(),void e.find("i.fa").removeClass("green");e.find("ul li.alert-item").remove(),r=r.reverse();for(var i in r){var title=$("<span></span>").text(r[i].title),time=$('<span class="time"></span>').text(r[i].elapsed);r[i].icon.length&&title.prepend($('<i class="fa fa-fw"></i>').addClass("fa-"+r[i].icon)),e.find("ul").prepend($('<li class="alert-item"></li>').append($('<a href="javascript:void(0)"></a>').append($("<span></span>").append(title,time))))}e.find(".badge").text(r.length).show(),e.find("i.fa").addClass("green"),e.find("ul li").click(function(){e.find(".badge").hide(),e.find("i.fa").removeClass("green")})}})}var e=$("#alerts");e.length&&(alertUpdate(),setInterval(alertUpdate,5e3))}!function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function(){var obj=this,args=arguments;timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(function(){execAsap||func.apply(obj,args),timeout=null},threshold||100)}};jQuery.fn[sr]=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger(sr)}}(jQuery,"smartresize");var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$RIGHT_COL=$(".right_col"),$FOOTER=$("footer");$(document).ready(function(){$(".collapse-link").on("click",function(){var $BOX_PANEL=$(this).closest(".x_panel"),$ICON=$(this).find("i"),$BOX_CONTENT=$BOX_PANEL.find(".x_content");$BOX_PANEL.attr("style")?$BOX_CONTENT.slideToggle(200,function(){$BOX_PANEL.removeAttr("style")}):($BOX_CONTENT.slideToggle(200),$BOX_PANEL.css("height","auto")),$ICON.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){$(this).closest(".x_panel").remove()})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})}),$("table input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none",countChecked()}),$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),"undefined"!=typeof NProgress&&($(document).ready(function(){NProgress.start()}),$(window).load(function(){NProgress.done()}));var originalLeave=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(obj){var container,timeout,self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);originalLeave.call(this,obj),obj.currentTarget&&(container=$(obj.currentTarget).siblings(".popover"),timeout=self.timeout,container.one("mouseenter",function(){clearTimeout(timeout),container.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(self,self)})}))},$("body").popover({selector:"[data-popover]",trigger:"click hover",delay:{show:50,hide:400}}),$(document).ready(function(){init_sidebar(),init_tabs(),init_autosize(),init_validator(),init_password_show(),init_switchery(),init_icheck(),init_datatables(),init_progressbar(),init_modals(),init_alerts()});