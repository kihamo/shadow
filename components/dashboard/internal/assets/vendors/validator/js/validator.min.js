var validator=function($){var message,tests,checkField,mark,unmark,field,minmax,defaults,validateWords,lengthRange,lengthLimit,pattern,alertTxt,data,email_illegalChars=/[\(\)\<\>\,\;\:\\\/\"\[\]]/,email_filter=/^.+@.+\..{2,6}$/;function testByType(type,value){return"tel"==type&&(pattern=pattern||"phone"),type&&"password"!=type&&"tel"!=type&&"search"!=type&&"file"!=type||(type="text"),!tests[type]||tests[type](value,!0)}function prepareFieldData(el){(field=$(el)).data("valid",!0),field.data("type",field.attr("type")),pattern=field.attr("pattern")}function checkField(){if("hidden"!=this.type&&$(this).is(":hidden"))return!0;if(prepareFieldData(this),field.data("val",field[0].value.replace(/^\s+|\s+$/g,"")),data=field.data(),alertTxt=message[field.prop("name")]||message.invalid,"select"===field[0].nodeName.toLowerCase()?data.type="select":"textarea"===field[0].nodeName.toLowerCase()&&(data.type="text"),validateWords=data.validateWords||0,lengthRange=data.validateLengthRange?(data.validateLengthRange+"").split(","):[1],lengthLimit=!!data.validateLength&&(data.validateLength+"").split(","),minmax=data.validateMinmax?(data.validateMinmax+"").split(","):"",data.valid=tests.hasValue(data.val),field.hasClass("optional")&&!data.valid&&(data.valid=!0),"checkbox"===field[0].type)data.valid=field[0].checked,alertTxt=message.checked;else if(data.valid)if(tests.sameAsPlaceholder(field)&&(alertTxt=message.empty,data.valid=!1),data.validateLinked){var linkedTo=0==data.validateLinked.indexOf("#")?$(data.validateLinked):$(":input[name="+data.validateLinked+"]");data.valid=tests.linked(data.val,linkedTo.val())}else(data.valid||"select"==data.type)&&(data.valid=testByType(data.type,data.val));return data.valid?unmark(field):(mark(field,alertTxt),submit=!1),data.valid}return message={invalid:"invalid input",checked:"must be checked",empty:"please put something here",min:"input is too short",max:"input is too long",number_min:"too low",number_max:"too high",url:"invalid URL",number:"not a number",email:"email address is invalid",email_repeat:"emails do not match",password_repeat:"passwords do not match",repeat:"no match",complete:"input is not complete",select:"Please select an option"},window.console||(console={},console.log=console.warn=function(){}),{defaults:defaults={alerts:!0,classes:{item:"item",alert:"alert",bad:"bad"}},checkField:checkField,keypress:function(e){if(prepareFieldData(this),e.charCode)return testByType(this.type,this.value)},checkAll:function($form){if(0==($form=$($form)).length)return console.warn("element not found"),!1;var submit=!0;return $form.find(":input").filter("[required=required], .required, .optional").not("[disabled=disabled]").each(function(){submit*=checkField.apply(this)}),!!submit},mark:mark=function(field,text){if(!text||!field||!field.length)return!1;var warning,item=field.closest("."+defaults.classes.item);item.hasClass(defaults.classes.bad)?defaults.alerts&&item.find("."+defaults.classes.alert).html(text):defaults.alerts&&(warning=$('<div class="'+defaults.classes.alert+'">').html(text),item.append(warning)),item.removeClass(defaults.classes.bad),setTimeout(function(){item.addClass(defaults.classes.bad)},0)},unmark:unmark=function(field){if(!field||!field.length)return console.warn('no "field" argument, null or DOM object not found'),!1;field.closest("."+defaults.classes.item).removeClass(defaults.classes.bad).find("."+defaults.classes.alert).remove()},message:message,tests:tests={sameAsPlaceholder:function(a){return $.fn.placeholder&&void 0!==a.attr("placeholder")&&data.val==a.prop("placeholder")},hasValue:function(a){return!!a||(alertTxt=message.empty,!1)},linked:function(a,b){return b==a||(alertTxt=message[data.type+"_repeat"]||message.no_match,!1)},email:function(a){return!(!email_filter.test(a)||a.match(email_illegalChars))||(alertTxt=a?message.email:message.empty,!1)},text:function(a,skip){if(validateWords){var words=a.split(" ");return!(words.length<validateWords||!function(len){for(var w=words.length;w--;)if(words[w].length<len)return!1;return!0}(2))||(alertTxt=message.complete,!1)}if(!skip&&lengthRange&&a.length<lengthRange[0])return alertTxt=message.min,!1;if(lengthRange&&lengthRange[1]&&a.length>lengthRange[1])return alertTxt=message.max,!1;if(lengthLimit&&lengthLimit.length)for(;lengthLimit.length;)if(lengthLimit.pop()==a.length)return alertTxt=message.complete,!1;if(pattern){var regex,jsRegex;switch(pattern){case"alphanumeric":regex=/^[a-zA-Z0-9]+$/i;break;case"numeric":regex=/^[0-9]+$/i;break;case"phone":regex=/^\+?([0-9]|[-|' '])+$/i;break;default:regex=pattern}try{if(jsRegex=new RegExp(regex).test(a),a&&!jsRegex)return!1}catch(err){return console.log(err,field,"regex is invalid"),!1}}return!0},number:function(a){return isNaN(parseFloat(a))&&!isFinite(a)?(alertTxt=message.number,!1):lengthRange&&a.length<lengthRange[0]?(alertTxt=message.min,!1):lengthRange&&lengthRange[1]&&a.length>lengthRange[1]?(alertTxt=message.max,!1):minmax[0]&&(0|a)<minmax[0]?(alertTxt=message.number_min,!1):!(minmax[1]&&(0|a)>minmax[1])||(alertTxt=message.number_max,!1)},date:function(a){var day,i,A=a.split(/[-./]/g);if(field[0].valueAsNumber)return!0;for(i=A.length;i--;)if(isNaN(parseFloat(a))&&!isFinite(a))return!1;try{return(day=new Date(A[2],A[1]-1,A[0])).getMonth()+1==A[1]&&day.getDate()==A[0]&&day}catch(er){return console.log("date test: ",err),!1}},url:function(a){return!!/^(https?:\/\/)?([\w\d\-_]+\.+[A-Za-z]{2,})+\/?/.test(a)||(alertTxt=a?message.url:message.empty,!1)},hidden:function(a){if(lengthRange&&a.length<lengthRange[0])return alertTxt=message.min,!1;if(pattern&&("alphanumeric"==pattern&&!/^[a-z0-9]+$/i.test(a)))return!1;return!0},select:function(a){return!!tests.hasValue(a)||(alertTxt=message.select,!1)}}}}(jQuery);